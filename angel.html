<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Angelçš„å¥åº·ç§˜æ›¸</title>
    
    <!-- å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- å¼•å…¥ React å’Œ ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- å¼•å…¥ Babel ç”¨æ–¼è§£æ JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Google Fonts: Nunito & Custom Styles -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap');
        
        body {
            background-color: #f8fafc; /* slate-50 */
            -webkit-tap-highlight-color: transparent;
        }
        
        .font-rounded {
            font-family: 'Nunito', 'Hiragino Maru Gothic ProN', 'Rounded Mplus 1c', 'Microsoft JhengHei', sans-serif;
        }

        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ICON COMPONENTS (SVG) ---
        const IconBase = ({ children, className, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}>{children}</svg>
        );

        const Sunrise = (p) => <IconBase {...p}><path d="M12 2v8"/><path d="m4.93 10.93 1.41 1.41"/><path d="M2 18h2"/><path d="M20 18h2"/><path d="m19.07 10.93-1.41 1.41"/><path d="M22 22H2"/><path d="m8 6 4-4 4 4"/><path d="M16 18a4 4 0 0 0-8 0"/></IconBase>;
        const Sun = (p) => <IconBase {...p}><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></IconBase>;
        const Utensils = (p) => <IconBase {...p}><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/><path d="M7 2v20"/><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"/></IconBase>;
        const Bed = (p) => <IconBase {...p}><path d="M2 4v16"/><path d="M2 8h18a2 2 0 0 1 2 2v10"/><path d="M2 17h20"/><path d="M6 8v9"/></IconBase>;
        const Coffee = (p) => <IconBase {...p}><path d="M17 8h1a4 4 0 1 1 0 8h-1"/><path d="M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z"/><line x1="6" x2="6" y1="1" y2="4"/><line x1="10" x2="10" y1="1" y2="4"/><line x1="14" x2="14" y1="1" y2="4"/></IconBase>;
        const Plane = (p) => <IconBase {...p}><path d="M2 22h20"/><path d="M13 6h-3l-4 8h-2l3-10h7l5 14h-2.5l-3.5-12Z"/><path d="m15 17 2 5"/></IconBase>;
        const Milk = (p) => <IconBase {...p}><path d="M8 2h8"/><path d="M9 2v2.789a4 4 0 0 1-.672 2.219l-.656.984A4 4 0 0 0 7 10.212V20a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-9.789a4 4 0 0 0-.672-2.219l-.656-.984A4 4 0 0 1 15 4.788V2"/><path d="M7 15a6.472 6.472 0 0 1 5 0 6.47 6.47 0 0 0 5 0"/></IconBase>;
        const Pill = (p) => <IconBase {...p}><path d="m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z"/><path d="m8.5 8.5 7 7"/></IconBase>;
        const Info = (p) => <IconBase {...p}><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></IconBase>;
        const CheckCircle = (p) => <IconBase {...p}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><path d="m9 11 3 3L22 4"/></IconBase>;
        const Circle = (p) => <IconBase {...p}><circle cx="12" cy="12" r="10"/></IconBase>;
        const Droplet = (p) => <IconBase {...p}><path d="M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.74A17.16 17.16 0 0 0 12 2v0a17.16 17.16 0 0 0-7 7.26C3 11.1 2 13 2 15a7 7 0 0 0 10 7Z"/></IconBase>;
        const Cookie = (p) => <IconBase {...p}><path d="M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5"/><path d="M8.5 8.5v.01"/><path d="M16 15.5v.01"/><path d="M12 12v.01"/><path d="M11 17v.01"/><path d="M7 14v.01"/></IconBase>;
        const ShieldAlert = (p) => <IconBase {...p}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"/><path d="M12 8v4"/><path d="M12 16h.01"/></IconBase>;
        const Repeat = (p) => <IconBase {...p}><path d="m17 2 4 4-4 4"/><path d="M3 11v-1a4 4 0 0 1 4-4h14"/><path d="m7 22-4-4 4-4"/><path d="M21 13v1a4 4 0 0 1-4 4H3"/></IconBase>;
        const Briefcase = (p) => <IconBase {...p}><rect width="20" height="14" x="2" y="7" rx="2" ry="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></IconBase>;
        const ListTodo = (p) => <IconBase {...p}><rect x="3" y="5" width="6" height="6" rx="1"/><path d="m3 17 2 2 4-4"/><path d="M13 6h8"/><path d="M13 12h8"/><path d="M13 18h8"/></IconBase>;
        const Clock = (p) => <IconBase {...p}><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></IconBase>;
        const Activity = (p) => <IconBase {...p}><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></IconBase>;
        const AlertTriangle = (p) => <IconBase {...p}><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><path d="M12 9v4"/><path d="M12 17h.01"/></IconBase>;
        const Ban = (p) => <IconBase {...p}><circle cx="12" cy="12" r="10"/><path d="m4.9 4.9 14.2 14.2"/></IconBase>;
        const Calendar = (p) => <IconBase {...p}><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></IconBase>;

        // --- MAIN APP ---
        const SupplementApp = () => {
            const [activeTab, setActiveTab] = useState('two-meals');
            const [threeMealMode, setThreeMealMode] = useState('standard'); 
            const [tourSubTab, setTourSubTab] = useState('schedule'); 
            const [packingDuration, setPackingDuration] = useState('13'); 
            const [checkedItems, setCheckedItems] = useState({});
            const [packedItems, setPackedItems] = useState({}); 
            const [progress, setProgress] = useState(0);
            const [showResetModal, setShowResetModal] = useState(false);
            const [showPackingResetModal, setShowPackingResetModal] = useState(false);

            // Data Definitions
            const packingConfig = {
                '13': { label: '13å¤©åœ˜ (11ä»½)', multiplier: 11, mct: 10 },
                '11': { label: '11å¤©åœ˜ (9ä»½)', multiplier: 9, mct: 4 },
                '10': { label: '10å¤©åœ˜ (8ä»½)', multiplier: 8, mct: 2 },
            };

            const packingListItems = [
                { id: 'p_neocell', name: '1. NeoCell Super Collagen', baseDose: 3, unit: 'éŒ ' },
                { id: 'p_nmn', name: '2. bard NMN 30000', baseDose: 1, unit: 'é¡†' },
                { id: 'p_profaes', name: '3. ProFaes4 ç›Šç”ŸèŒ', baseDose: 1, unit: 'é¡†' },
                { id: 'p_bkomplex', name: '4. Mivolis B-Komplex (Bç¾¤)', baseDose: 1, unit: 'é¡†' },
                { id: 'p_ampk', name: '5. Life Extension AMPK', baseDose: 1, unit: 'éŒ ' },
                { id: 'p_vitc', name: '6. Mivolis Vitamin C', baseDose: 1, unit: 'é¡†' },
                { id: 'p_beauty', name: '7. Mivolis ç¾å®¹é…æ–¹ (Haut...)', baseDose: 1, unit: 'éŒ ' },
                { id: 'p_seal', name: '8. BioSunn Selolje (æµ·è±¹æ²¹)', baseDose: 1, unit: 'é¡†' },
                { id: 'p_blueberry', name: '9. Nordmea BlÃ¥bÃ¦r (è—è“)', baseDose: 1, unit: 'é¡†' },
                { id: 'p_cartilage', name: '10. BioSunn Haibrusk (è»Ÿéª¨)', baseDose: 2, unit: 'é¡†' },
                { id: 'p_magnesium', name: '11. Mivolis Magnesium 500 (é‚)', baseDose: 1, unit: 'éŒ ' },
                { id: 'p_calcium', name: '12. Mivolis Calcium 600 (éˆ£)', baseDose: 1, unit: 'éŒ ' },
            ];

            const scheduleDataTwoMeals = [
                {
                    id: 'phase1', title: 'ç¬¬ä¸€éšæ®µï¼šèµ·åºŠç©ºè…¹', subtitle: 'é¤å‰ 30 åˆ†é˜',
                    icon: <Sunrise className="w-7 h-7 text-orange-600" />, color: 'bg-orange-100', 
                    items: [
                        { id: 'neocell', name: 'NeoCell Super Collagen', dose: '2 éŒ ', desc: 'çš®è†šèˆ‡é ­é«®çš„åœ°åŸº', type: 'pill' },
                        { id: 'nmn', name: 'bard NMN 30000', dose: '1 é¡†', desc: 'å–šé†’ç´°èƒèˆ‡é«”åŠ›', type: 'pill' }
                    ]
                },
                {
                    id: 'phase2', title: 'ç¬¬äºŒéšæ®µï¼šç¬¬ä¸€é¤ (æ—©åˆé¤)', subtitle: 'å•Ÿå‹•ä»£è¬ãƒ»æç¥ãƒ»æ²¹é¡',
                    icon: <Sun className="w-7 h-7 text-amber-600" />, color: 'bg-amber-100',
                    subSections: [
                        {
                            title: 'é£¯å‰å…ˆåƒ (ä¸¸é¡/ç²‰é¡)',
                            items: [
                                { id: 'profaes4', name: 'ProFaes4 ç›Šç”ŸèŒ', dose: '1 é¡†', desc: 'éš¨é¤åŠ©æ¶ˆåŒ–ã€æ¸›å°‘è„¹æ°£', type: 'pill' },
                                { id: 'bkomplex', name: 'Mivolis B-Komplex (Bç¾¤)', dose: '1 é¡†', desc: 'æä¾›å·¥ä½œæ‰€éœ€èƒ½é‡', type: 'pill' },
                                { id: 'beauty', name: 'Mivolis ç¾å®¹é…æ–¹ (Haut...)', dose: '1 éŒ ', desc: 'å«é‹…èˆ‡Q10ï¼Œç™½å¤©å¸æ”¶å¥½', type: 'pill' }
                            ]
                        },
                        {
                            title: 'é£¯ä¸­æˆ–é£¯å¾Œå (æ²¹é¡)',
                            items: [
                                { id: 'seal_oil', name: 'BioSunn Selolje æµ·è±¹æ²¹', dose: '1 é¡†', desc: 'æ²¹é¡è«‹åœ¨ç™½å¤©æ¶ˆåŒ–ï¼Œé˜²é€†æµ', type: 'oil' }
                            ]
                        }
                    ]
                },
                {
                    id: 'phase3', title: 'ç¬¬ä¸‰éšæ®µï¼šç¬¬äºŒé¤ (æ™šé¤)', subtitle: 'æŠ—æ°§åŒ–ãƒ»ä¿®å¾©ãƒ»é¿å…æ²¹è†©',
                    prePhaseEvents: [
                        { title: 'å¿«æ¨‚ä¸‹åˆèŒ¶ï¼æœæœèƒ½é‡ã€ä¹³æ¸…è›‹ç™½é£²ã€‘ï¼ˆåˆé¤å¾Œï¼’å°æ™‚ï¼‰', note: 'å»ºè­°æ²–æ³¡ 350cc - 400cc çš„æ°´ï¼èŠ± 20-30 åˆ†é˜ æ…¢æ…¢å–å®Œ', icon: <Coffee className="w-5 h-5 text-orange-600" />, colorTheme: 'orange' },
                        { title: 'é£¢é¤“æ³•å¯¶ï¼æœæœèƒ½é‡ã€è›‹ç™½å¨åŒ–é…¥ã€‘ï¼ˆæ™šé¤å‰1.5å°æ™‚ï¼‰', note: 'å»ºè­°æ­é… 350cc - 400cc çš„æ°´ï¼èŠ± 20-30 åˆ†é˜ æ…¢æ…¢åƒå®Œ', icon: <Cookie className="w-5 h-5 text-orange-900" />, colorTheme: 'chestnut' }
                    ],
                    icon: <Utensils className="w-7 h-7 text-sky-600" />, color: 'bg-sky-100',
                    items: [
                        { id: 'vitc', name: 'Mivolis Vitamin C', dose: '1 é¡†', desc: 'ç·©é‡‹å‹ï¼Œå¤œé–“æŠ—æ°§åŒ–ä¿®å¾©', type: 'pill' },
                        { id: 'blueberry', name: 'Nordmea BlÃ¥bÃ¦r è—è“', dose: '1 é¡†', desc: 'èˆ’ç·©æ•´å¤©ç”¨çœ¼ç–²å‹', type: 'pill' },
                        { id: 'cartilage', name: 'BioSunn Haibrusk è»Ÿéª¨', dose: '2 é¡†', desc: 'å¤œé–“ä¿®å¾©é—œç¯€è»Ÿéª¨', type: 'pill' }
                    ]
                },
                {
                    id: 'phase4', title: 'ç¬¬å››éšæ®µï¼šç¡å‰ (â°30-60åˆ†é˜)', subtitle: 'è§£æ±ºä¾¿ç§˜èˆ‡ç¡çœ å•é¡Œ',
                    prePhaseEvents: [{ title: 'ğŸ’¡ é»ƒé‡‘æ™‚é–“ï¼šæ™šé¤è‡³ç¡å‰è‡³å°‘é–“éš” 2 å°æ™‚', colorTheme: 'amber' }],
                    icon: <Bed className="w-7 h-7 text-indigo-600" />, color: 'bg-indigo-100',
                    items: [
                        { id: 'magnesium', name: 'Mivolis Magnesium 500 é‚', dose: '1 éŒ ', desc: 'é—œéµï¼å¹«åŠ©æ’ä¾¿èˆ‡æ”¾é¬†è‚Œè‚‰', type: 'pill' },
                        { id: 'calcium', name: 'Mivolis Calcium 600 éˆ£', dose: '1 éŒ ', desc: 'è£œéª¨ä¸¦ç©©å®šç¥ç¶“', type: 'pill' },
                        { id: 'neocell_night', name: 'NeoCell Super Collagen', dose: '1 éŒ ', desc: 'åˆ†æ¬¡å¸æ”¶æ•ˆæœæ›´ä½³', type: 'pill' }
                    ]
                }
            ];

            const getScheduleThreeMeals = (mode) => {
                const isGap = mode === 'gap';
                return [
                    { 
                      id: 't1', title: '1. èµ·åºŠç©ºè…¹', subtitle: 'é˜²çš®é¬†é—œéµ', 
                      icon: <Sunrise className="w-7 h-7 text-orange-600" />, color: 'bg-orange-100',
                      items: [{ id: 'tm_neocell', name: 'NeoCell Super Collagen', dose: '2 éŒ ', desc: 'ç©ºè…¹å¸æ”¶æœ€ä½³', type: 'pill' }] 
                    },
                    { 
                      id: 't2', title: '2. æ—©é¤', subtitle: 'é é˜²è„¹æ°£', 
                      icon: <Coffee className="w-7 h-7 text-amber-600" />, color: 'bg-amber-100',
                      items: [
                          { id: 'tm_profaes', name: 'ProFaes4 ç›Šç”ŸèŒ', dose: '1 é¡†', desc: 'é é˜²æ•´å¤©è„¹æ°£', type: 'pill' },
                          isGap ? { id: 'tm_mct1', name: "Nature's Truth MCT Oil", dose: '1 é¡†', desc: 'â˜… ç©ºçª—æœŸï¼šå¢åŠ é£½è¶³æ„Ÿ', type: 'oil', highlight: true } : null
                      ].filter(Boolean) 
                    },
                    { 
                      id: 't3', title: '3. åˆé¤', subtitle: 'æ²¹è„‚æ¶ˆåŒ–', 
                      icon: <Sun className="w-7 h-7 text-yellow-600" />, color: 'bg-yellow-100',
                      items: [
                          { id: 'tm_seal', name: 'BioSunn Selolje (æµ·è±¹æ²¹)', dose: '1 é¡†', desc: 'ä¸­åˆæ¶ˆåŒ–æœ€å¥½', type: 'oil' },
                          isGap ? { id: 'tm_mct2', name: "Nature's Truth MCT Oil", dose: '1 é¡†', desc: 'â˜… å»¶çºŒé£½è¶³æ„Ÿ', type: 'oil', highlight: true } : null
                      ].filter(Boolean) 
                    },
                    {
                      id: 't4', title: '4. æ™šé¤', subtitle: 'ä¿®å¾©èˆ‡æŠ—æ°§åŒ–',
                      icon: <Utensils className="w-7 h-7 text-sky-600" />, color: 'bg-sky-100',
                      prePhaseEvents: [
                        { title: 'å¿«æ¨‚ä¸‹åˆèŒ¶ï¼æœæœèƒ½é‡ã€ä¹³æ¸…è›‹ç™½é£²ã€‘ï¼ˆåˆé¤å¾Œï¼’å°æ™‚ï¼‰', note: 'å»ºè­°æ²–æ³¡ 350cc - 400cc çš„æ°´ï¼èŠ± 20-30 åˆ†é˜ æ…¢æ…¢å–å®Œ', icon: <Coffee className="w-5 h-5 text-orange-600" />, colorTheme: 'orange' },
                        { title: 'é£¢é¤“æ³•å¯¶ï¼æœæœèƒ½é‡ã€è›‹ç™½å¨åŒ–é…¥ã€‘ï¼ˆæ™šé¤å‰1.5å°æ™‚ï¼‰', note: 'å»ºè­°æ­é… 350cc - 400cc çš„æ°´ï¼èŠ± 20-30 åˆ†é˜ æ…¢æ…¢åƒå®Œ', icon: <Cookie className="w-5 h-5 text-orange-900" />, colorTheme: 'chestnut' }
                      ],
                      items: [
                          { id: 'tm_vitc', name: 'Mivolis Vitamin C', dose: '1 é¡†', desc: 'å¹«åŠ©è»Ÿéª¨èˆ‡è† åŸè›‹ç™½åˆæˆ', type: 'pill' },
                          { id: 'tm_cartilage', name: 'BioSunn Haibrusk (é¯Šé­šè»Ÿéª¨)', dose: '2 é¡†', desc: 'å¤œé–“ä¿®å¾©é—œç¯€è»Ÿéª¨', type: 'pill' }
                      ]
                    },
                    {
                      id: 't5', title: '5. ç¡å‰ (â°30-60åˆ†é˜)', subtitle: 'è§£æ±ºä¾¿ç§˜ãƒ»æ”¾é¬†åŠ©çœ ',
                      icon: <Bed className="w-7 h-7 text-indigo-600" />, color: 'bg-indigo-100',
                      prePhaseEvents: [{ title: 'ğŸ’¡ é»ƒé‡‘æ™‚é–“ï¼šæ™šé¤è‡³ç¡å‰è‡³å°‘é–“éš” 2 å°æ™‚', colorTheme: 'amber' }],
                      items: [
                          { id: 'tm_magnesium', name: 'Mivolis Magnesium 500 (é‚)', dose: '1 éŒ ', desc: 'é—œéµï¼è§£æ±ºä¾¿ç§˜ã€æ”¾é¬†è‚Œè‚‰ã€åŠ©çœ ', type: 'pill' },
                          { id: 'tm_calcium', name: 'Mivolis Calcium 600 (éˆ£)', dose: '1 éŒ ', desc: 'è£œéˆ£ï¼Œèˆ‡é‚ä¸€èµ·ç©©å®šç¥ç¶“', type: 'pill' },
                          { id: 'tm_neocell_night', name: 'NeoCell Super Collagen', dose: '1 éŒ ', desc: 'åˆ†æ¬¡å¸æ”¶ï¼Œå¤œé–“ä¿®å¾©', type: 'pill' }
                      ]
                    }
                ];
            };

            const alternativesData = [
                { category: 'ç¡çœ èˆ‡æ’ä¾¿', icon: <Bed className="w-6 h-6 text-indigo-600" />, color: 'bg-indigo-50', primary: 'Mivolis Magnesium 500 (é‚)', alt: 'Natrol 5-HTP', note: 'é‚èƒ½è§£ä¾¿ç§˜+åŠ©çœ ã€‚' },
                { category: 'èƒ½é‡èˆ‡ä»£è¬', icon: <Coffee className="w-6 h-6 text-amber-600" />, color: 'bg-amber-50', primary: 'Mivolis B-Komplex (Bç¾¤)', alt: "Nature's Truth MCT Oil", note: 'æ‰“é‡æœŸé–“ B ç¾¤å„ªå…ˆã€‚' }
            ];

            const getEventStyles = (theme) => {
                const map = {
                    orange: { line: 'bg-orange-200/50', cap: 'bg-orange-50 border-orange-100 text-orange-700', note: 'text-orange-600' },
                    chestnut: { line: 'bg-orange-300/50', cap: 'bg-orange-100 border-orange-200 text-orange-900', note: 'text-orange-800' },
                    amber: { line: 'bg-amber-200/50', cap: 'bg-amber-50 border-amber-100 text-amber-700', note: 'text-amber-600' }
                };
                return map[theme] || map.amber;
            };

            useEffect(() => {
                const savedChecks = localStorage.getItem('angel_checks');
                const savedPacked = localStorage.getItem('angel_packed');
                const today = new Date().toDateString();
                const savedDate = localStorage.getItem('angel_date');
                if (savedChecks && savedDate === today) setCheckedItems(JSON.parse(savedChecks));
                else { setCheckedItems({}); localStorage.setItem('angel_date', today); }
                if (savedPacked) setPackedItems(JSON.parse(savedPacked));
            }, []);

            useEffect(() => {
                localStorage.setItem('angel_checks', JSON.stringify(checkedItems));
                localStorage.setItem('angel_packed', JSON.stringify(packedItems));
                const total = packingListItems.length + 1;
                const checked = Object.values(checkedItems).filter(Boolean).length;
                setProgress(Math.min(100, Math.round((checked / 12) * 100)));
            }, [checkedItems, packedItems]);

            const confirmReset = () => { setCheckedItems({}); setProgress(0); setShowResetModal(false); };
            const confirmPackingReset = () => { setPackedItems({}); setShowPackingResetModal(false); };

            const SupplementCard = ({ item }) => {
                const isChecked = checkedItems[item.id];
                return (
                    <div onClick={() => setCheckedItems(p => ({...p, [item.id]: !p[item.id]}))}
                         className={`relative p-3 mb-2 rounded-3xl border transition-all cursor-pointer flex items-start gap-3 
                         ${isChecked ? 'bg-teal-50/80 border-teal-200/60' : item.highlight ? 'bg-amber-50 border-amber-200' : 'bg-white border-slate-100 shadow-sm'}`}>
                        <div className="mt-1">{isChecked ? <CheckCircle className="w-6 h-6 fill-teal-500 text-white" /> : <Circle className="w-6 h-6 text-slate-300" />}</div>
                        <div className="flex-1">
                            <div className="flex justify-between items-start">
                                <h3 className={`font-bold text-xl leading-tight ${isChecked ? 'text-teal-800 opacity-60 line-through' : 'text-slate-700'}`}>{item.name}</h3>
                                <span className="font-bold px-2 py-0.5 rounded-full bg-slate-100 text-slate-600 text-sm">{item.dose}</span>
                            </div>
                            <p className={`font-medium mt-0.5 text-base ${isChecked ? 'text-teal-700 opacity-60' : 'text-slate-500'}`}>{item.desc}</p>
                        </div>
                    </div>
                );
            };

            return (
                <div className="min-h-screen bg-slate-50 text-slate-800 font-rounded pb-24">
                    {/* Header */}
                    <div className="bg-white sticky top-0 z-50 shadow-sm border-b border-slate-100 backdrop-blur-md bg-white/95">
                        <div className="max-w-md mx-auto px-5 py-4">
                            <div className="flex justify-between items-end mb-3">
                                <div>
                                    <h1 className="text-2xl font-extrabold text-slate-800 tracking-wide">Angel <span className="font-medium text-xl text-slate-600">çš„å¥åº·ç§˜æ›¸</span></h1>
                                    <p className="text-[10px] font-bold text-slate-400 mt-1 tracking-[0.2em] uppercase">{new Date().toLocaleDateString('zh-TW', { weekday: 'long', month: 'long', day: 'numeric' })}</p>
                                </div>
                                <div className="text-right">
                                    <div className="text-3xl font-black text-teal-500 leading-none">{progress}%</div>
                                    <div className="text-[10px] font-bold text-slate-300 uppercase tracking-[0.15em] mt-1">Goal</div>
                                </div>
                            </div>
                            <div className="h-3 w-full bg-slate-100 rounded-full overflow-hidden shadow-inner">
                                <div className="h-full bg-gradient-to-r from-teal-300 to-teal-500 progress-glow transition-all duration-700" style={{ width: `${progress}%` }} />
                            </div>
                        </div>

                        {/* Tabs */}
                        <div className="px-5 pb-4 pt-1">
                            <div className="grid grid-cols-4 gap-1 p-1.5 bg-slate-100/80 rounded-3xl w-full">
                                {['two-meals', 'three-meals', 'protein', 'alternatives'].map(tab => (
                                    <button key={tab} onClick={() => setActiveTab(tab)}
                                            className={`py-2 text-xs sm:text-sm font-bold rounded-2xl transition-all flex flex-col items-center justify-center px-1
                                            ${activeTab === tab ? 'bg-white text-teal-600 shadow-sm ring-1 ring-black/5 scale-[1.02]' : 'text-slate-400'}`}>
                                        {tab === 'two-meals' && <Coffee className="w-4 h-4 mb-1" />}
                                        {tab === 'three-meals' && <Plane className="w-4 h-4 mb-1" />}
                                        {tab === 'protein' && <Milk className="w-4 h-4 mb-1" />}
                                        {tab === 'alternatives' && <Pill className="w-4 h-4 mb-1" />}
                                        <span className="text-center leading-tight">
                                            {tab === 'two-meals' && 'ä¸€æ—¥å…©é¤'}
                                            {tab === 'three-meals' && 'å‡ºåœ˜ç‰ˆ'}
                                            {tab === 'protein' && 'é«˜è›‹ç™½'}
                                            {tab === 'alternatives' && 'æ›¿ä»£æ–¹æ¡ˆ'}
                                        </span>
                                    </button>
                                ))}
                            </div>
                        </div>
                    </div>

                    <div className="max-w-md mx-auto p-5 space-y-6">
                        {/* Tab Contents */}
                        {activeTab === 'two-meals' && (
                            <div className="animate-fade-in">
                                <div className="bg-gradient-to-br from-teal-50 to-white border border-teal-100/50 rounded-3xl p-5 flex gap-3 shadow-sm mb-6">
                                    <Info className="w-6 h-6 text-teal-600 shrink-0" />
                                    <div className="text-base text-teal-700/80 font-medium">
                                        <strong className="text-teal-800 text-lg block mb-1">Mounjaro æç¤º</strong>
                                        <ul className="list-disc pl-4 space-y-1"><li>æµ·è±¹æ²¹ç­‰æ²¹é¡è«‹åœ¨ç™½å¤©æ”å–ï¼Œé¿å…å¤œé–“èƒƒé…¸å€’æµã€‚</li><li>ç¡å‰é‚éå¸¸é‡è¦ï¼Œæœ‰åŠ©æ–¼ç·©è§£è—¥ç‰©å¼•èµ·çš„ä¾¿ç§˜ã€‚</li></ul>
                                    </div>
                                </div>
                                {scheduleDataTwoMeals.map(phase => (
                                    <div key={phase.id} className="mb-6">
                                        {phase.prePhaseEvents && phase.prePhaseEvents.map((ev, i) => {
                                            const s = getEventStyles(ev.colorTheme);
                                            return (
                                                <div key={i} className="flex items-center justify-center gap-3 my-4">
                                                    <div className={`h-px flex-1 ${s.line}`} />
                                                    <div className={`flex flex-col items-center px-6 py-3 rounded-3xl border shadow-sm ${s.cap}`}>
                                                        <div className="flex items-center gap-1.5 font-bold text-base tracking-wide">{ev.icon} {ev.title}</div>
                                                        <span className={`text-sm font-medium mt-1 opacity-90 ${s.note}`}>{ev.note}</span>
                                                    </div>
                                                    <div className={`h-px flex-1 ${s.line}`} />
                                                </div>
                                            );
                                        })}
                                        <div className="flex items-center gap-3 mb-3"><div className={`p-2.5 rounded-2xl ${phase.color}`}>{phase.icon}</div>
                                            <div><h2 className="font-bold text-xl text-slate-700">{phase.title}</h2><p className="text-sm text-slate-500">{phase.subtitle}</p></div>
                                        </div>
                                        {phase.items && phase.items.map(item => <SupplementCard key={item.id} item={item} />)}
                                        {phase.subSections && phase.subSections.map((sub, i) => (
                                            <div key={i} className="mt-4 pl-4 border-l-2 border-slate-100 ml-3">
                                                <h3 className="text-sm font-bold text-slate-400 mb-2 uppercase">{sub.title}</h3>
                                                {sub.items.map(it => <SupplementCard key={it.id} item={it} />)}
                                            </div>
                                        ))}
                                    </div>
                                ))}
                                <button onClick={handleResetClick} className="w-full py-4 text-slate-400 font-medium hover:text-rose-500 flex items-center justify-center gap-2 rounded-3xl"><Repeat className="w-4 h-4" /> é‡ç½®ä»Šæ—¥ç´€éŒ„</button>
                            </div>
                        )}

                        {activeTab === 'three-meals' && (
                            <div className="animate-fade-in">
                                <div className="flex gap-4 mb-6 justify-center">
                                    <button onClick={() => setTourSubTab('schedule')} className={`px-5 py-2 rounded-full text-sm font-bold border-2 ${tourSubTab === 'schedule' ? 'bg-teal-500 text-white border-teal-500 shadow-md' : 'bg-white text-slate-400 border-slate-200'}`}>æ¯æ—¥è¡Œç¨‹</button>
                                    <button onClick={() => setTourSubTab('packing')} className={`px-5 py-2 rounded-full text-sm font-bold border-2 flex items-center gap-2 ${tourSubTab === 'packing' ? 'bg-teal-500 text-white border-teal-500 shadow-md' : 'bg-white text-slate-400 border-slate-200'}`}><Briefcase className="w-4 h-4" />è¡Œææ‰“åŒ…</button>
                                </div>
                                {tourSubTab === 'packing' ? (
                                    <div className="space-y-4">
                                        <div className="flex gap-2 p-1.5 bg-slate-200/50 rounded-2xl border border-slate-100">
                                            {['13', '11', '10'].map(d => <button key={d} onClick={() => setPackingDuration(d)} className={`flex-1 py-3 text-xs font-bold rounded-xl transition-all ${packingDuration === d ? 'bg-white text-teal-700 shadow-sm' : 'text-slate-500'}`}>{packingConfig[d].label}</button>)}
                                        </div>
                                        {packingListItems.map(it => (
                                            <div key={it.id} onClick={() => setPackedItems(p => ({...p, [it.id]: !p[it.id]}))} className={`flex justify-between p-4 rounded-2xl border transition-all cursor-pointer ${packedItems[it.id] ? 'bg-teal-50/50 border-teal-200' : 'bg-white border-slate-100 shadow-sm'}`}>
                                                <div className="flex items-center gap-3">{packedItems[it.id] ? <CheckCircle className="w-5 h-5 fill-teal-500 text-white" /> : <Circle className="w-5 h-5 text-slate-300" />}<span className={`font-bold text-base ${packedItems[it.id] ? 'line-through opacity-60' : ''}`}>{it.name}</span></div>
                                                <span className="text-base font-black px-3 py-1 rounded-xl bg-slate-100">{it.baseDose * packingConfig[packingDuration].multiplier} {it.unit}</span>
                                            </div>
                                        ))}
                                        <div className="mt-6 pt-4 border-t border-slate-100">
                                            <div className="text-amber-600 font-bold text-sm mb-3">13. Nature's Truth MCT Oil</div>
                                            <div onClick={() => setPackedItems(p => ({...p, p_mct: !p.p_mct}))} className={`flex justify-between p-4 rounded-2xl border transition-all cursor-pointer ${packedItems.p_mct ? 'bg-amber-50 border-amber-200' : 'bg-white border-slate-100 shadow-sm'}`}>
                                                <div className="flex items-center gap-3">{packedItems.p_mct ? <CheckCircle className="w-5 h-5 fill-amber-500 text-white" /> : <Circle className="w-5 h-5 text-slate-300" />}<span className={`font-bold text-base ${packedItems.p_mct ? 'line-through opacity-60' : ''}`}>MCT Oil</span></div>
                                                <span className="text-base font-black px-3 py-1 rounded-xl bg-amber-100">{packingConfig[packingDuration].mct} é¡†</span>
                                            </div>
                                        </div>
                                        <button onClick={handlePackingResetClick} className="w-full py-4 text-slate-400 font-medium hover:text-rose-500 flex items-center justify-center gap-2 rounded-3xl"><Repeat className="w-4 h-4" /> é‡ç½®æ‰“åŒ…æ¸…å–®</button>
                                    </div>
                                ) : (
                                    <div className="space-y-6">
                                        <div className="flex p-1.5 bg-slate-200/50 rounded-3xl border border-slate-100">
                                            <button onClick={() => setThreeMealMode('standard')} className={`flex-1 py-3 text-xs font-bold rounded-2xl transition-all ${threeMealMode === 'standard' ? 'bg-white text-teal-600' : 'text-slate-500'}`}>å¹³æ—¥æ¨¡å¼</button>
                                            <button onClick={() => setThreeMealMode('gap')} className={`flex-1 py-3 text-xs font-bold rounded-2xl transition-all ${threeMealMode === 'gap' ? 'bg-orange-50 text-orange-600 shadow-sm' : 'text-slate-500'}`}>ç©ºçª—æœŸ</button>
                                        </div>
                                        {getScheduleThreeMeals(threeMealMode).map(p => (
                                            <div key={p.id} className="mb-6">
                                                {p.prePhaseEvents && p.prePhaseEvents.map((ev, i) => {
                                                    const s = getEventStyles(ev.colorTheme);
                                                    return (
                                                        <div key={i} className="flex items-center justify-center gap-3 my-4">
                                                            <div className={`h-px flex-1 ${s.line}`} />
                                                            <div className={`flex flex-col items-center px-6 py-3 rounded-3xl border shadow-sm ${s.cap}`}>
                                                                <div className="flex items-center gap-1.5 font-bold text-base tracking-wide">{ev.icon} {ev.title}</div>
                                                                <span className={`text-sm font-medium mt-1 opacity-90 ${s.note}`}>{ev.note}</span>
                                                            </div>
                                                            <div className={`h-px flex-1 ${s.line}`} />
                                                        </div>
                                                    );
                                                })}
                                                <div className="flex items-center gap-3 mb-3"><div className={`p-2.5 rounded-2xl ${p.color}`}>{p.icon}</div><div><h2 className="font-bold text-xl">{p.title}</h2><p className="text-sm text-slate-500">{p.subtitle}</p></div></div>
                                                {p.items.map(it => <SupplementCard key={it.id} item={it} />)}
                                            </div>
                                        ))}
                                        <button onClick={handleResetClick} className="w-full py-4 text-slate-400 font-medium hover:text-rose-500 flex items-center justify-center gap-2 rounded-3xl"><Repeat className="w-4 h-4" /> é‡ç½®ä»Šæ—¥ç´€éŒ„</button>
                                    </div>
                                )}
                            </div>
                        )}

                        {activeTab === 'protein' && (
                            <div className="animate-fade-in space-y-6">
                                <div className="bg-white p-6 rounded-[2rem] border border-slate-100 shadow-sm">
                                    <div className="flex items-start gap-4 mb-5 pb-4 border-b border-amber-100">
                                        <div className="p-3 bg-amber-100 rounded-2xl"><Coffee className="w-7 h-7 text-amber-900" /></div>
                                        <div><h3 className="text-xl font-bold text-slate-800">æœæœèƒ½é‡ï¼ä¹³æ¸…è›‹ç™½</h3><div className="mt-2 text-base text-amber-900 bg-amber-100 px-3 py-1 rounded-xl font-bold flex items-center gap-2"><Clock className="w-4 h-4" />åˆé¤å¾Œ 2 å°æ™‚</div></div>
                                    </div>
                                    <div className="bg-amber-50 border border-amber-100 rounded-2xl p-4 space-y-2">
                                        <h4 className="font-bold text-amber-700 flex items-center gap-2 text-base"><AlertTriangle className="w-4 h-4" /> é‡é»å®åš€</h4>
                                        <p className="text-base text-amber-900/80 leading-relaxed">è«‹èŠ± 20-30 åˆ†é˜æ…¢æ…¢å–å®Œï¼Œä¸€å£æ°£çŒä¸‹å®¹æ˜“æƒ³åã€‚æ³¡ 350-400cc æ°´é‡åŠ å€é †ä¾¿è£œæ°´ã€‚</p>
                                    </div>
                                </div>
                                <div className="bg-white p-6 rounded-[2rem] border border-slate-100 shadow-sm">
                                    <div className="flex items-start gap-4 mb-5 pb-4 border-b border-amber-100">
                                        <div className="p-3 bg-amber-100 rounded-2xl"><Cookie className="w-7 h-7 text-amber-900" /></div>
                                        <div><h3 className="text-xl font-bold text-slate-800">æœæœèƒ½é‡ï¼è›‹ç™½å¨åŒ–é¤…</h3><div className="mt-2 text-base text-amber-900 bg-amber-100 px-3 py-1 rounded-xl font-bold flex items-center gap-2"><Clock className="w-4 h-4" />æ™šé¤å‰ 1.5 å°æ™‚</div></div>
                                    </div>
                                    <div className="bg-rose-50 border border-rose-100 rounded-2xl p-4">
                                        <h4 className="font-bold text-rose-700 mb-2 flex items-center gap-2 text-base"><Ban className="w-4 h-4" />è«‹å‹¿é£Ÿç”¨æ™‚é–“</h4>
                                        <p className="text-base text-rose-900/80">ç¡å‰ä¸è¦åƒï¼ŒMCT æ²¹å®¹æ˜“å°è‡´ç«ç‡’å¿ƒã€‚æ­£é¤ç•¶ä¸‹ä¸è¦åƒï¼Œè›‹ç™½è³ªä¸è¶³ä¸”æœƒå½±éŸ¿æ­£é¤èƒƒå£ã€‚</p>
                                    </div>
                                </div>
                            </div>
                        )}

                        {activeTab === 'alternatives' && (
                            <div className="animate-fade-in space-y-4">
                                {alternativesData.map((alt, i) => (
                                    <div key={i} className="bg-white p-5 rounded-3xl border border-slate-100 shadow-sm">
                                        <div className="flex items-center gap-3 mb-4 pb-3 border-b border-slate-50">{alt.icon}<h4 className="font-bold text-xl">{alt.category}</h4></div>
                                        <div className="grid grid-cols-[auto_1fr] gap-x-4 gap-y-2 text-base mb-4">
                                            <span className="text-sm font-black text-teal-600 bg-teal-50 px-2 py-1 rounded-md uppercase">é¦–é¸</span><span className="font-bold">{alt.primary}</span>
                                            <span className="text-sm font-black text-slate-400 bg-slate-100 px-2 py-1 rounded-md uppercase">æ›¿ä»£</span><span className="font-medium text-slate-500">{alt.alt}</span>
                                        </div>
                                        <div className="text-base text-slate-500 bg-slate-50 p-3 rounded-2xl leading-relaxed">ğŸ’¡ {alt.note}</div>
                                    </div>
                                ))}
                            </div>
                        )}
                    </div>

                    {/* Modals */}
                    {showResetModal && (
                        <div className="fixed inset-0 bg-slate-900/60 z-[100] flex items-center justify-center p-6 backdrop-blur-sm">
                            <div className="bg-white rounded-[2rem] p-6 max-w-xs w-full shadow-2xl text-center">
                                <div className="bg-rose-100 w-14 h-14 rounded-full flex items-center justify-center mx-auto mb-4"><Repeat className="w-7 h-7 text-rose-500" /></div>
                                <h3 className="text-xl font-extrabold text-slate-800 mb-2">ç¢ºå®šé‡ç½®ï¼Ÿ</h3>
                                <p className="text-slate-500 text-sm mb-6">é€™å°‡æ¸…é™¤ä»Šæ—¥ç´€éŒ„ã€‚</p>
                                <div className="flex gap-3"><button onClick={() => setShowResetModal(false)} className="flex-1 py-3 rounded-2xl border-2 text-slate-600 font-bold">å–æ¶ˆ</button>
                                <button onClick={confirmReset} className="flex-1 py-3 rounded-2xl bg-rose-500 text-white font-bold">é‡ç½®</button></div>
                            </div>
                        </div>
                    )}
                    {showPackingResetModal && (
                        <div className="fixed inset-0 bg-slate-900/60 z-[100] flex items-center justify-center p-6 backdrop-blur-sm">
                            <div className="bg-white rounded-[2rem] p-6 max-w-xs w-full shadow-2xl text-center">
                                <div className="bg-rose-100 w-14 h-14 rounded-full flex items-center justify-center mx-auto mb-4"><Repeat className="w-7 h-7 text-rose-500" /></div>
                                <h3 className="text-xl font-extrabold text-slate-800 mb-2">ç¢ºå®šé‡ç½®æ‰“åŒ…ï¼Ÿ</h3>
                                <p className="text-slate-500 text-sm mb-6">é€™å°‡æ¸…é™¤æ‰“åŒ…å‹¾é¸ã€‚</p>
                                <div className="flex gap-3"><button onClick={() => setShowPackingResetModal(false)} className="flex-1 py-3 rounded-2xl border-2 text-slate-600 font-bold">å–æ¶ˆ</button>
                                <button onClick={confirmPackingReset} className="flex-1 py-3 rounded-2xl bg-rose-500 text-white font-bold">é‡ç½®</button></div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<SupplementApp />);
    </script>
</body>
</html>
